!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.bcComment=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var api={question:function(e){var t=new XMLHttpRequest;t.open("GET","/api/question",!0),t.onreadystatechange=api.ready(t,e),t.send()},post:function(e,t,n){var r=new XMLHttpRequest,i="/api/post/"+encodeURIComponent(e)+"/comment";r.open("POST",i,!0),r.setRequestHeader("Content-Type","application/json"),r.onreadystatechange=api.ready(r,n),r.send(JSON.stringify(data))},ready:function(e,t){return function(){4===e.readyState&&(200===e.status?t(null,JSON.parse(e.responseText)):t(new Error("API error.")))}}},input={string:function(e){return e?e.value.trim():void 0},check:function(e){return e?e.checked:!1},"int":function(e){return e?parseInt(e.value,10):void 0}},validator={string:{is_set:function(e,t){("undefined"==typeof e||0===e.length)&&t.push("__ must be set.")},email:function(e,t){"string"!=typeof e||""===e||e.match(/[^@]+@[^@]+/)||t.push("__ must match email pattern.")},site:function(e,t){"string"!=typeof e||""===e||e.match(/https?:\/\//)||t.push("__ must match URL pattern.")}},check:function(e,t,n){for(var r=[],i=e.validators||[],o=0;o<i.length;o++)i[o].call(null,n,r);for(var a=t.substring(0,1).toUpperCase()+t.substring(1),s=0;s<r.length;s++)r[s]=r[s].replace("__",a);return r}},clazz={list:function(e){return e.className.split(/\s+/)},remove:function(e,t){for(var n=clazz.list(e),r=[],i=0;i<n.length;i++)n[i]!==t&&""!==n[i]&&r.push(n[i]);e.className=r.join(" ")},add:function(e,t){for(var n=clazz.list(e),r=!1,i=0;i<n.length;i++)n[i]===t&&(r=!0);r||n.push(t),e.className=n.join(" ")}},errors={display:function(e,t){clazz.add(e.element.parentNode,"error"),e.error=document.createElement("div"),e.error.innerHTML=t,e.element.parentNode.appendChild(e.error)},remove:function(e){var t=e.element.getAttribute("type");"hidden"!==t&&clazz.remove(e.element.parentNode,"error"),e.error&&(e.error.parentNode.removeChild(e.error),delete e.error)}},reader={read:function(e){var t=!0,n={};return reader.each(e,function(e,r){errors.remove(e);var i=input[e.type](e.element),o=validator.check(e,r,i);o.length>0&&(t=!1,errors.display(e,o.join(" "))),"undefined"!=typeof i&&(n[r]=i)}),{values:n,valid:t}},each:function(e,t){for(var n in e){var r=e[n];r.element&&t(r,n)}}};module.exports=function(e){if(e&&e.form&&e.form.elements){var t=e.form,n=t.elements,r={post_id:{type:"string",element:n.post_id},reply_to:{type:"string",element:n.reply_to},author:{type:"string",validators:[validator.string.is_set],element:n.author},email:{type:"string",validators:[validator.string.email],element:n.email},site:{type:"string",validators:[validator.string.site],element:n.site},content:{type:"string",validators:[validator.string.is_set],element:n.content},notify:{type:"check",element:n.notify},question:{type:"int",element:n.question},answer:{type:"string",validators:[validator.string.is_set],element:n.answer}};api.question(function(t,n){t||(e.question.innerHTML=n.data.question)}),t.onsubmit=function(){var e=reader.read(r);return console.log(JSON.stringify(e,null,2)),!1}}};


},{}]},{},[1])
//# sourceMappingURL=comment.js.map
(1)
});
