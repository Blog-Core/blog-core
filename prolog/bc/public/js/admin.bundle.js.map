{"version":3,"file":"bundle.js","sources":["/home/raivo/blog-core/admin/node_modules/browserify/node_modules/browser-pack/_prelude.js","/home/raivo/blog-core/admin/admin.js","/home/raivo/blog-core/admin/controller/auth.js","/home/raivo/blog-core/admin/controller/post.js","/home/raivo/blog-core/admin/controller/file.js","/home/raivo/blog-core/admin/controller/user.js","/home/raivo/blog-core/admin/controller/comment.js","/home/raivo/blog-core/admin/hex.js","/home/raivo/blog-core/admin/api.js","/home/raivo/blog-core/admin/menu.js","/home/raivo/blog-core/admin/message.js","/home/raivo/blog-core/admin/xhr.js","/home/raivo/blog-core/admin/view.js","/home/raivo/blog-core/admin/validate.js","/home/raivo/blog-core/admin/vm/post_vm.js","/home/raivo/blog-core/admin/vm/user_vm.js","/home/raivo/blog-core/admin/spin.js","/home/raivo/blog-core/admin/languages.js"],"names":["auth","require","post","file","user","comment","hex","api","menu","message","ko","subscribable","fn","trimmed","computed","read","this","trim","write","value","valueHasMutated","owner","route","active","list","catch","error","id","edit","type","create","go","directory","string","filename","form","logout","hasKey","view","validate","exports","model","username","observable","password","login","clear","hasError","then","res","status","sessionStorage","setItem","data","key","formError","show","removeItem","postVm","mytype","getItem","myid","posts","sort","post1","post2","date_updated","forEach","expanded","expand","editable","author","remove","confirm","removePost","$id","response","info","refresh","done","start","observableArray","hasMore","length","more","end","Math","min","i","push","slice","users","editor","document","getElementById","style","height","scrollHeight","compareEntry","entry1","entry2","compareName","name","entries","entry","encoded","parent","tokens","split","join","subdirectory","subdirectory_form","upload_form","progress","addSubdirectory","createDirectory","showSubdirectoryForm","cancelDirectoryForm","removeDirectory","upload","files","reader","FileReader","onload","xhr","XMLHttpRequest","addEventListener","uploadProgress","uploadComplete","uploadFailed","uploadCanceled","open","encodeURIComponent","window","btoa","setRequestHeader","apiKey","send","Uint8Array","result","readAsArrayBuffer","e","lengthComputable","round","loaded","total","showUploadForm","cancelUploadForm","size","date","modified","removeFile","userVm","removeUser","entryInfo","comments","removeComment","title","charCodeAt","toString","String","fromCharCode","parseInt","substr","options","method","url","JSON","stringify","headers","Content-Type","parse","X-Key","updatePost","savePost","updateUser","saveUser","Error","visible","applyBindings","text","messages","createElement","className","innerHTML","appendChild","setTimeout","removeChild","err","button","spin","count","module","Promise","resolve","reject","req","Object","keys","onreadystatechange","readyState","hide","responseText","content","console","log","children","removeNode","wrap","formatDate","ts","Date","toISOString","substring","errors","querySelectorAll","item","parentNode","classList","elem","add","insertBefore","findAuthor","authors","isoDateToUnix","match","setUTCHours","setUTCFullYear","floor","getTime","validatePost","slug","published","update","submitPost","toJS","scroll","languages","description","content_type","commenting","tags","author_selectable","submit","save","language","date_published","d","subscribe","speakingurl","fullname","link","password_edit","password_text","creating","js","display","code"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var auth = require('./controller/auth');\nvar post = require('./controller/post');\nvar file = require('./controller/file');\nvar user = require('./controller/user');\nvar comment = require('./controller/comment');\nvar hex = require('./hex');\nvar api = require('./api');\nvar menu = require('./menu');\nvar message = require('./message');\n\n// Helper to trim whitespace from values.\n\nko.subscribable.fn.trimmed = function() {\n\n    return ko.computed({\n\n        read: function() {\n\n            return this().trim();\n        },\n\n        write: function(value) {\n\n            this(value.trim());\n            this.valueHasMutated();\n        },\n\n        owner: this\n    });\n};\n\nroute(/^posts/, function() {\n\n    menu.active('posts');\n    post.list('post').catch(message.error);\n});\n\nroute(/^pages/, function() {\n\n    menu.active('pages');\n    post.list('page').catch(message.error);\n});\n\nroute(/^blocks/, function() {\n\n    menu.active('blocks');\n    post.list('block').catch(message.error);\n});\n\nroute(/^post\\/([^\\/]+)/, function(id) {\n\n    menu.active('posts');\n    post.edit(id).catch(message.error);\n});\n\nroute(/^page\\/([^\\/]+)/, function(id) {\n\n    menu.active('pages');\n    post.edit(id).catch(message.error);\n});\n\nroute(/^block\\/([^\\/]+)/, function(id) {\n\n    menu.active('blocks');\n    post.edit(id).catch(message.error);\n});\n\nroute(/^new\\/([^\\/]+)/, function(type) {\n\n    menu.active(type + 's');\n    post.create(type).catch(message.error);\n});\n\nroute(/^files/, function() {\n\n    menu.active('files');\n    route.go('directory/' + hex.hex('/'));\n});\n\nroute(/^directory\\/([^\\/]+)/, function(directory) {\n\n    menu.active('files');\n    file.directory(hex.string(directory)).catch(message.error);\n});\n\nroute(/^file\\/([^\\/]+)/, function(filename) {\n\n    menu.active('files');\n    file.file(hex.string(filename)).catch(message.error);\n});\n\nroute(/^comments\\/([^\\/]+)/, function(id) {\n\n    menu.active('posts');\n    comment.list(id).catch(message.error);\n});\n\nroute(/^users/, function() {\n\n    menu.active('users');\n    user.list().catch(message.error);\n});\n\nroute(/^user\\/new/, function() {\n\n    menu.active('users');\n    user.create().catch(message.error);\n});\n\nroute(/^user\\/([^\\/]+)/, function(id) {\n\n    menu.active('users');\n    user.edit(id).catch(message.error);\n});\n\nroute(/^login/, function() {\n\n    menu.active();\n    auth.form().catch(message.error);\n});\n\nroute(/^logout/, function() {\n\n    menu.active();\n    auth.logout();\n});\n\nroute(/.*/, function() {\n\n    route.go(api.hasKey() ? 'posts' : 'login');\n});\n","var view = require('../view');\nvar api = require('../api');\nvar message = require('../message');\nvar validate = require('../validate');\n\nexports.form = function() {\n\n    var model = {\n\n        username: ko.observable(''),\n        password: ko.observable(''),\n\n        login: function(form) {\n\n            validate.clear(form);\n\n            var username = model.username();\n            var password = model.password();\n\n            if (username === '') {\n\n                validate.error('username', 'Username is not entered.');\n            }\n\n            if (password === '') {\n\n                validate.error('password', 'Password is not entered.');\n            }\n\n            if (validate.hasError(form)) {\n\n                return false;\n            }\n\n            api.login(username, password).then(function(res) {\n\n                if (res.status === 'success') {\n\n                    sessionStorage.setItem('api-key', res.data.key);\n                    sessionStorage.setItem('user-id', res.data.id);\n                    sessionStorage.setItem('user-type', res.data.type);\n\n                    route.go('posts');\n\n                } else {\n\n                    validate.formError(form, res.message);\n                }\n\n            }, message.error);\n        }\n    };\n\n    return view.show('login', model);\n};\n\n// Clears the session tokens.\n\nexports.logout = function() {\n\n    sessionStorage.removeItem('api-key');\n    sessionStorage.removeItem('user-id');\n    sessionStorage.removeItem('user-type');\n\n    route.go('login');\n};\n","var view = require('../view');\nvar api = require('../api');\nvar message = require('../message');\nvar postVm = require('../vm/post_vm');\n\nexports.list = function(type) {\n\n    var mytype = sessionStorage.getItem('user-type');\n\n    var myid = sessionStorage.getItem('user-id');\n\n    return api.posts(type).then(function(posts) {\n\n        posts.sort(function(post1, post2) {\n\n            return post2.date_updated - post1.date_updated;\n        });\n\n        posts.forEach(function(post) {\n\n            post.expanded = ko.observable(false);\n\n            post.expand = function() {\n\n                if (post.expanded()) {\n\n                    post.expanded(false);\n\n                } else {\n\n                    post.expanded(true);\n                }\n            };\n\n            post.editable = mytype === 'admin' || myid === post.author;\n\n            post.remove = function() {\n\n                if (confirm('Remove the post?')) {\n\n                    api.removePost(post.$id).then(function(response) {\n\n                        if (response.status === 'success') {\n\n                            message.info('The post was removed.');\n\n                            route.refresh();\n\n                        } else {\n\n                            message.error(response.message);\n                        }\n\n                    }, message.error).done();\n                }\n            };\n        });\n\n        var start = 0;\n\n        var model = {\n\n            type: type,\n\n            posts: ko.observableArray([]),\n\n            hasMore: ko.observable(start + 5 < posts.length),\n\n            more: function() {\n\n                start += 5;\n\n                var end = Math.min(start + 5, posts.length);\n\n                for (var i = start; i < end; i++) {\n\n                    model.posts.push(posts[i]);\n                }\n\n                model.hasMore(start + 5 < posts.length);\n            }\n        };\n\n        model.posts(posts.slice(0, 5));\n\n        view.show('posts', model);\n    });\n};\n\nexports.edit = function(id) {\n\n    return api.users().then(function(users) {\n\n        return api.post(id).then(function(post) {\n\n            return view.show('post', postVm.create(users, post)).then(function() {\n\n                // Autoset initial textarea height.\n\n                var editor = document.getElementById('post-content');\n\n                editor.style.height = (editor.scrollHeight + 10) + 'px';\n            });\n        });\n    });\n};\n\nexports.create = function(type) {\n\n    return api.users().then(function(users) {\n\n        var model = postVm.create(users);\n\n        model.type(type);\n\n        return view.show('post', model);\n    });\n};\n","var view = require('../view');\nvar api = require('../api');\nvar hex = require('../hex');\nvar message = require('../message');\n\n// Comparator function to sort\n// directories before files and both\n// then by name.\n\nfunction compareEntry(entry1, entry2) {\n\n    // Compares directory entries by name.\n\n    function compareName() {\n\n        return entry1.name < entry2.name ? -1 : 1;\n    }\n\n    if (entry1.directory) {\n\n        if (entry2.directory) {\n\n            return compareName();\n\n        } else {\n\n            return -1;\n        }\n\n    } else {\n\n        if (entry2.directory) {\n\n            return 1;\n\n        } else {\n\n            return compareName();\n        }\n    }\n}\n\nexports.directory = function(directory) {\n\n    return api.directory(directory).then(function(entries) {\n\n        entries.sort(compareEntry);\n\n        entries.forEach(function(entry) {\n\n            entry.encoded = hex.hex((directory === '/' ? '' : directory) + '/' + entry.name);\n        });\n\n        var parent = '/';\n\n        if (directory !== '/') {\n\n            var tokens = directory.split(/\\//);\n\n            parent = hex.hex('/' + tokens.slice(1, tokens.length - 1).join('/'));\n        }\n\n        var model = {\n\n            directory: directory,\n            entries: entries,\n            subdirectory: ko.observable('').trimmed(),\n            subdirectory_form: ko.observable(false),\n            upload_form: ko.observable(false),\n            parent: parent,\n            progress: ko.observable(0),\n\n            addSubdirectory: function() {\n\n                api.createDirectory(directory, model.subdirectory()).then(function(response) {\n\n                    if (response.status === 'success') {\n\n                        route.refresh();\n                    }\n                });\n            },\n\n            showSubdirectoryForm: function() {\n\n                model.subdirectory_form(true);\n                model.upload_form(false);\n            },\n\n            cancelDirectoryForm: function() {\n\n                model.subdirectory_form(false);\n            },\n\n            removeDirectory: function() {\n\n                if (confirm('Remove current directory?')) {\n\n                    api.removeDirectory(directory).then(function(response) {\n\n                        if (response.status === 'success') {\n\n                            message.info('Directory successfully removed.');\n\n                            route.go('directory/' + parent);\n                        }\n                    });\n                }\n            },\n\n            upload: function(form) {\n\n                var file = document.getElementById('directory-file').files[0];\n\n                if (file) {\n\n                    var reader = new FileReader();\n\n                    reader.onload = function() {\n\n                        var xhr = new XMLHttpRequest();\n\n                        xhr.upload.addEventListener('progress', model.uploadProgress, false);\n\n                        xhr.addEventListener('load', model.uploadComplete, false);\n                        xhr.addEventListener('error', model.uploadFailed, false);\n                        xhr.addEventListener('abort', model.uploadCanceled, false);\n\n                        xhr.open('POST', '/api/upload/' + encodeURIComponent(window.btoa(directory)));\n\n                        xhr.setRequestHeader('X-Key', api.apiKey());\n                        xhr.setRequestHeader('X-File-Name', file. name);\n                        xhr.setRequestHeader('Content-Type', 'application/octet-stream');\n\n                        xhr.send(new Uint8Array(reader.result));\n                    };\n\n                    reader.readAsArrayBuffer(file);\n                }\n            },\n\n            uploadProgress: function(e) {\n\n                if (e.lengthComputable) {\n\n                    model.progress(Math.round(e.loaded * 100 / e.total));\n                }\n            },\n\n            uploadComplete: function() {\n\n                route.refresh();\n                message.info('File uploaded.');\n            },\n\n            uploadFailed: function() {\n\n\n            },\n\n            uploadCanceled: function() {\n\n                model.upload_form(false);\n            },\n\n            showUploadForm: function() {\n\n                model.upload_form(true);\n                model.subdirectory_form(false);\n            },\n\n            cancelUploadForm: function() {\n\n                model.upload_form(false);\n            }\n        };\n\n        return view.show('directory', model);\n    });\n};\n\nexports.file = function(file) {\n\n    return api.file(file).then(function(response) {\n\n        var tokens = file.split(/\\//);\n\n        var parent = hex.hex('/' + tokens.slice(1, tokens.length - 1).join('/'));\n\n        var model = {\n\n            file: file,\n            parent: parent,\n            size: response.data.size,\n            date: response.data.modified,\n\n            remove: function() {\n\n                if (confirm('Remove file ' + file + '?')) {\n\n                    api.removeFile(file).then(function(response) {\n\n                        if (response.status === 'success') {\n\n                            message.info('File removed.');\n\n                            route.go('directory/' + parent);\n                        }\n                    });\n                }\n            }\n        };\n\n        return view.show('file', model);\n    });\n};\n","var api = require('../api');\nvar view = require('../view');\nvar message = require('../message');\nvar userVm = require('../vm/user_vm');\n\nexports.list = function() {\n\n    var mytype = sessionStorage.getItem('user-type');\n    var myid = sessionStorage.getItem('user-id');\n\n    return api.users().then(function(users) {\n\n        users.forEach(function(user) {\n\n            user.expanded = ko.observable(false);\n\n            user.expand = function() {\n\n                if (user.expanded()) {\n\n                    user.expanded(false);\n\n                } else {\n\n                    user.expanded(true);\n                }\n            };\n\n            user.remove = function() {\n\n                if (confirm('Remove the user?')) {\n\n                    api.removeUser(user.$id).then(function(response) {\n\n                        if (response.status === 'success') {\n\n                            message.info('The user was removed.');\n\n                            route.refresh();\n\n                        } else {\n\n                            message.error(response.message);\n                        }\n\n                    }, message.error).done();\n                }\n            };\n\n            user.editable = mytype === 'admin' || user.$id === myid;\n        });\n\n        var model = { users: users, mytype: mytype };\n\n        return view.show('users', model);\n\n    }, message.error);\n};\n\nexports.edit = function(id) {\n\n    return api.user(id).then(function(user) {\n\n        return view.show('user', userVm.create(user));\n\n    }, message.error);\n};\n\nexports.create = function() {\n\n    return view.show('user', userVm.create());\n};\n","var message = require('../message');\nvar view = require('../view');\nvar api = require('../api');\n\nexports.list = function(id) {\n\n    return api.entryInfo(id).then(function(info) {\n\n        return api.comments(id).then(function(comments) {\n\n            comments.forEach(function(comment) {\n\n                comment.expanded = ko.observable(false);\n\n                comment.expand = function() {\n\n                    if (comment.expanded()) {\n\n                        comment.expanded(false);\n\n                    } else {\n\n                        comment.expanded(true);\n                    }\n                };\n\n                comment.remove = function() {\n\n                    if (confirm('Remove the comment?')) {\n\n                        api.removeComment(comment.$id).then(function(response) {\n\n                            if (response.status === 'success') {\n\n                                route.refresh();\n\n                            } else {\n\n                                message.error(response.message);\n                            }\n\n                        }, message.error);\n                    }\n                };\n            });\n\n            var model = {\n\n                title: info.title,\n                comments: comments\n            };\n\n            return view.show('comments', model);\n        });\n    });\n};\n","exports.hex = function(string) {\n\n    var hex = '';\n\n    for(var i = 0; i < string.length; i++) {\n\n        hex += string.charCodeAt(i).toString(16);\n    }\n\n    return hex;\n};\n\nexports.string = function(hex) {\n\n    if (typeof hex !== 'string') {\n\n        hex = hex.toString();\n    }\n\n    var string = '';\n\n    for (var i = 0; i < hex.length; i += 2) {\n\n        string += String.fromCharCode(parseInt(hex.substr(i, 2), 16));\n    }\n\n    return string;\n};\n","var xhr = require('./xhr');\n\nexports.login = function(username, password) {\n\n    var options = {\n\n        method: 'POST',\n\n        url: '/api/auth',\n\n        data: JSON.stringify({\n\n            username: username,\n            password: password\n        }),\n\n        headers: {\n\n            'Content-Type': 'application/json'\n        }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\nexports.posts = function(type) {\n\n    var options = {\n\n        url: '/api/entries/' + type,\n\n        headers: {\n\n            'X-Key': apiKey()\n        }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response).data;\n    });\n};\n\nexports.post = function(id) {\n\n    var options = {\n\n        url: '/api/entry/' + encodeURIComponent(id),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response).data;\n    });\n};\n\nexports.entryInfo = function(id) {\n\n    var options = {\n\n        url: '/api/entry/' + encodeURIComponent(id) + '/info',\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response).data;\n    });\n};\n\n// Retrieves the given post comments.\n\nexports.comments = function(id) {\n\n    var options = {\n\n        url: '/api/post/' + encodeURIComponent(id) + '/comments',\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response).data;\n    });\n};\n\n// Removes the given comment.\n\nexports.removeComment = function(id) {\n\n    var options = {\n\n        method: 'DELETE',\n\n        url: '/api/comment/' + encodeURIComponent(id),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\nexports.updatePost = function(id, data) {\n\n    var options = {\n\n        method: 'PUT',\n\n        url: '/api/entry/' + id,\n\n        data: JSON.stringify(data),\n\n        headers: { 'X-Key': apiKey(), 'Content-Type': 'application/json' }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\nexports.savePost = function(data) {\n\n    var options = {\n\n        method: 'POST',\n\n        url: '/api/entry',\n\n        data: JSON.stringify(data),\n\n        headers: { 'X-Key': apiKey(), 'Content-Type': 'application/json' }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\n// Removes the given post.\n\nexports.removePost = function(id) {\n\n    var options = {\n\n        method: 'DELETE',\n\n        url: '/api/entry/' + encodeURIComponent(id),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\nexports.directory = function(directory) {\n\n    var options = {\n\n        url: '/api/directory/' + encodeURIComponent(window.btoa(directory)),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response).data;\n    });\n};\n\nexports.createDirectory = function(directory, subdirectory) {\n\n    var options = {\n\n        method: 'POST',\n\n        url: '/api/directory/' + encodeURIComponent(window.btoa(directory)) + '/' +\n            encodeURIComponent(subdirectory),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\nexports.removeDirectory = function(directory) {\n\n    var options = {\n\n        method: 'DELETE',\n\n        url: '/api/directory/' + encodeURIComponent(window.btoa(directory)),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\n// Retrieves file metainfo.\n\nexports.file = function(file) {\n\n    var options = {\n\n        url: '/api/file/' + encodeURIComponent(window.btoa(file)),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\n// Removes the given file.\n\nexports.removeFile = function(file) {\n\n    var options = {\n\n        method: 'DELETE',\n\n        url: '/api/file/' + encodeURIComponent(window.btoa(file)),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\n// Retrieves all users.\n\nexports.users = function() {\n\n    var options = {\n\n        url: '/api/users',\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response).data;\n    });\n};\n\n// Retrieves the given user.\n\nexports.user = function(id) {\n\n    var options = {\n\n        url: '/api/user/' + encodeURIComponent(id),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response).data;\n    });\n};\n\n// Updates the given user.\n\nexports.updateUser = function(id, data) {\n\n    var options = {\n\n        method: 'PUT',\n\n        data: JSON.stringify(data),\n\n        url: '/api/user/' + encodeURIComponent(id),\n\n        headers: { 'X-Key': apiKey(), 'Content-Type': 'application/json' }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\n// Saves the new user.\n\nexports.saveUser = function(data) {\n\n    var options = {\n\n        method: 'POST',\n\n        data: JSON.stringify(data),\n\n        url: '/api/user',\n\n        headers: { 'X-Key': apiKey(), 'Content-Type': 'application/json' }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\n// Removes the given user.\n\nexports.removeUser = function(id) {\n\n    var options = {\n\n        method: 'DELETE',\n\n        url: '/api/user/' + encodeURIComponent(id),\n\n        headers: { 'X-Key': apiKey() }\n    };\n\n    return xhr(options).then(function(response) {\n\n        return JSON.parse(response);\n    });\n};\n\n// Checks whether the API key has been set.\n\nexports.hasKey = function() {\n\n    return !!sessionStorage.getItem('api-key');\n};\n\nvar apiKey = exports.apiKey = function() {\n\n    var key = sessionStorage.getItem('api-key');\n\n    if (!key) {\n\n        throw new Error('API key is not set');\n    }\n\n    return key;\n};\n","var model = {\n\n    visible: ko.observable(false),\n    active: ko.observable()\n};\n\nexports.active = function(name) {\n\n    if (name) {\n\n        model.active(name);\n        model.visible(true);\n\n    } else {\n\n        model.active();\n        model.visible(false);\n    }\n};\n\nvar menu = document.getElementById('menu');\n\nko.applyBindings(model, menu);\n","// Shows informational message.\n\nexports.info = function(text) {\n\n    var messages = document.getElementById('messages');\n    var message = document.createElement('div');\n\n    message.className = 'alert alert-success message';\n    message.innerHTML = text;\n\n    messages.appendChild(message);\n\n    setTimeout(function() {\n\n        messages.removeChild(message);\n\n    }, 2000);\n};\n\n// Shows error message.\n\nexports.error = function(err) {\n\n    var button = document.createElement('button');\n\n    button.className = 'close';\n    button.innerHTML = '&times;';\n\n    var text = document.createElement('span');\n    text.innerHTML = err.toString();\n\n    var messages = document.getElementById('messages');\n    var message = document.createElement('div');\n\n    message.className = 'alert alert-danger message';\n    message.appendChild(button);\n    message.appendChild(text);\n\n    button.addEventListener('click', function() {\n\n        messages.removeChild(message);\n\n    }, false);\n\n    messages.appendChild(message);\n};\n","var spin = require('./spin');\n\n// From https://gist.github.com/matthewp/3099268\n\nvar count = 0;\n\nmodule.exports = function(options) {\n\n    return new Promise(function(resolve, reject) {\n\n        var req = new XMLHttpRequest();\n\n        req.open(options.method || 'GET', options.url, true);\n\n        Object.keys(options.headers || {}).forEach(function (key) {\n\n            req.setRequestHeader(key, options.headers[key]);\n        });\n\n        req.onreadystatechange = function(e) {\n\n            if (req.readyState !== 4) {\n\n                return;\n            }\n\n            count -= 1;\n\n            if (count === 0) {\n\n                spin.hide();\n            }\n\n            if (req.status !== 200) {\n\n                reject(new Error('Server responded with a status of ' + req.status));\n\n            } else {\n\n                resolve(req.responseText);\n            }\n        };\n\n        if (count === 0) {\n\n            spin.show();\n        }\n\n        count += 1;\n\n        req.send(options.data);\n    });\n};\n","var xhr = require('./xhr');\n\nvar content = document.getElementById('content');\n\nexports.show = function(name, model) {\n\n    console.log('Loading template ' + name);\n\n    // Load template, turn into DOM, bind with KnockoutJS.\n\n    return xhr({ url: '/admin/tpl/' + name + '.html' }).then(function(response) {\n\n        if (content.children.length === 1) {\n\n            // Something was previously shown,\n            // remove it.\n\n            ko.removeNode(content.children[0]);\n        }\n\n        var wrap = document.createElement('div');\n\n        wrap.innerHTML = response;\n\n        content.appendChild(wrap);\n\n        ko.applyBindings(model, wrap);\n    });\n};\n\nwindow.formatDate = function(ts) {\n\n    return new Date(1000 * ts).toISOString().substring(0, 10);\n};\n","// Cleans the form from error messages.\n\nexports.clear = function(form) {\n\n    var errors = form.querySelectorAll('.error-message');\n    var error, i;\n\n    for (i = 0; i < errors.length; i++) {\n\n        error = errors.item(i);\n\n        error.parentNode.classList.remove('has-error');\n        error.parentNode.removeChild(error);\n    }\n\n    errors = form.parentNode.querySelectorAll('.alert-danger');\n\n    for (i = 0; i < errors.length; i++) {\n\n        error = errors.item(i);\n        error.parentNode.removeChild(error);\n    }\n};\n\n// Checks whether the form\n// has a validation error.\n\nexports.hasError = function(form) {\n\n    return form.querySelectorAll('.error-message').length > 0;\n};\n\n// Adds error to the container of the\n// given input.\n\nexports.error = function(id, message) {\n\n    var elem = document.getElementById(id);\n\n    var error = document.createElement('div');\n\n    error.className = 'error-message';\n    error.innerHTML = message;\n\n    elem.parentNode.appendChild(error);\n    elem.parentNode.classList.add('has-error');\n};\n\n// Sets error to the whole form.\n\nexports.formError = function(form, message) {\n\n    var error = document.createElement('div');\n\n    error.className = 'alert alert-danger';\n    error.innerHTML = message;\n\n    form.parentNode.insertBefore(error, form);\n};\n","var api = require('../api');\nvar message = require('../message');\nvar validate = require('../validate');\nvar languages = require('../languages');\n\n// Creates post view model for already\n// existing post or a new post. For new\n// post, data must be unset. The authors\n// argument must contain the list of all\n// users.\n\nexports.create = function(authors, data) {\n\n    var myid = sessionStorage.getItem('user-id');\n\n    var mytype = sessionStorage.getItem('user-type');\n\n    // Sets author to the current user\n    // by default. Gets overriden by data.\n\n    var author = findAuthor(authors, myid);\n\n    var post = {\n\n        // List of authors. Used by the\n        // author list dropdown.\n\n        authors: authors,\n\n        // The post title. When this is\n        // the new post then initial slug\n        // is generated by it.\n\n        title: ko.observable('Untitled').trimmed(),\n\n        // The post slug. Can contain\n        // \"safe\" characters only.\n\n        slug: ko.observable('untitled').trimmed(),\n\n        // The post description. Can\n        // be left blank.\n\n        description: ko.observable('').trimmed(),\n\n        // The post content. Can be either\n        // Markdown or raw HTML.\n\n        content: ko.observable('').trimmed(),\n\n        // The post type. Currently\n        // available types are post,\n        // page and block.\n\n        type: ko.observable('post'),\n\n        // Type of the post content.\n        // Will be processed by the\n        // Markdown formatter when set\n        // to 'markdown''\n\n        content_type: ko.observable('markdown'),\n\n        // Flag to set whether the post\n        // is published or not.\n\n        published: ko.observable(false),\n\n        // Flag to set whether commenting\n        // is allowed or not.\n\n        commenting: ko.observable(true),\n\n        // List of tags. Tags are separated\n        // by commas.\n\n        tags: ko.observable('').trimmed(),\n\n        // The count of comments.\n        // Currently not used.\n\n        comments: ko.observable(0),\n\n\n        // Selected user. Only admins\n        // can select author other than\n        // themself.\n\n        author: ko.observable(author),\n\n        // Flag that indicates whether\n        // the current user can select\n        // the post author.\n\n        author_selectable: mytype === 'admin',\n\n        // Publish date as a string in\n        // the format YYYY-MM-DD. Might be\n        // unset when published flag is not set.\n\n        date: ko.observable('').trimmed(),\n\n        // Update date as a string in\n        // the format YYYY-MM-DD.\n\n        update: ko.observable('').trimmed(),\n\n        // Validates the post data.\n        // Saves or updates it using the API.\n\n        submit: function() {\n\n            submitPost(post, true);\n        },\n\n        // Similar to submit but leaves\n        // the form.\n\n        save: function() {\n\n            submitPost(post, false);\n        },\n\n        // The post language code. See\n        // languages.js for the list of codes.\n        // FIXME use default code.\n\n        language: ko.observable(),\n\n        // List of available languages.\n\n        languages: languages,\n\n        // Returns the plain data object\n        // to send to the backend.\n\n        toJS: function() {\n\n            var tags = post.tags().trim();\n\n            var date = post.date();\n\n            // date_published will be undefined when\n            // no date has been entered.\n\n            var date_published;\n\n            if (date !== '') {\n\n                date_published = isoDateToUnix(date);\n            }\n\n            var date_updated = isoDateToUnix(post.update());\n\n            return {\n\n                author: post.author().$id,\n                title: post.title(),\n                slug: post.slug(),\n                description: post.description(),\n                content: post.content(),\n                type: post.type(),\n                date_published: date_published,\n                date_updated: date_updated,\n                commenting: post.commenting(),\n                published: post.published(),\n                content_type: post.content_type(),\n                tags: tags === '' ? [] : tags.split(/\\, */),\n                language: post.language()\n            };\n        }\n    };\n\n    // Sets the view model values by the\n    // actual data object.\n\n    if (data) {\n\n        author = findAuthor(authors, data.author);\n\n        // When the publish date is set then\n        // set the date field to formatted string.\n\n        if (typeof data.date_published !== 'undefined') {\n\n            var d = new Date(data.date_published * 1000);\n\n            post.date(d.toISOString().substring(0, 10));\n        }\n\n        post.$id = data.$id;\n        post.author(author);\n        post.title(data.title);\n        post.slug(data.slug);\n        post.description(data.description || '');\n        post.content(data.content);\n        post.type(data.type);\n        post.content_type(data.content_type);\n        post.published(data.published);\n        post.commenting(data.commenting);\n        post.tags(data.tags.join(', '));\n        post.comments(data.comments);\n        post.language(data.language);\n\n    } else {\n\n        // Only when for new post.\n        // Add automatic slug generation.\n\n        post.title.subscribe(function(value) {\n\n            post.slug(speakingurl(value));\n        });\n    }\n\n    // Default update date is the current date.\n\n    post.update(new Date().toISOString().substring(0, 10));\n\n    post.published.subscribe(function(value) {\n\n        // Set publish date when post is published.\n        // Applies only when no publish date is set.\n\n        if (value && post.date() === '') {\n\n            post.date(new Date().toISOString().substring(0, 10));\n        }\n    });\n\n    return post;\n};\n\n// Finds matching author from the\n// array of authors.\n\nfunction findAuthor(authors, id) {\n\n    var author;\n\n    for (var i = 0; i < authors.length; i++) {\n\n        if (authors[i].$id === id) {\n\n            author = authors[i];\n\n            break;\n        }\n    }\n\n    if (!author) {\n\n        throw new Error('No author ' + data.author);\n    }\n\n    return author;\n}\n\n// Converts ISO8601 date part into\n// an Unix timestamp.\n\nfunction isoDateToUnix(string) {\n\n    var match = string.match(/^(\\d{4})\\-(\\d{2})\\-(\\d{2})$/);\n\n    if (!match) {\n\n        throw new Error('Date does not match pattern: ' + string);\n    }\n\n    var date = new Date();\n\n    date.setUTCHours(0, 0, 0, 0);\n    date.setUTCFullYear(parseInt(match[1], 10), parseInt(match[2], 10) - 1, parseInt(match[3], 10));\n\n    return Math.floor(date.getTime() / 1000);\n}\n\n// Validates the given post.\n// Adds errors using the validate module.\n\nfunction validatePost(post) {\n\n    if (post.title() === '') {\n\n        validate.error('post-title', 'Title is not entered.');\n    }\n\n    var slug = post.slug();\n\n    if (slug === '') {\n\n        validate.error('post-slug', 'Slug is not entered.');\n\n    } else {\n\n        if (!slug.match(/^[a-z0-9\\-_]+$/)) {\n\n            validate.error('post-slug', 'Use lowercase letters, numbers, hyphen and underscore.');\n        }\n    }\n\n    if (post.content() === '') {\n\n        validate.error('post-content', 'Content is not entered.');\n    }\n\n    var date = post.date();\n\n    if (date === '') {\n\n        if (post.published()) {\n\n            validate.error('post-date', 'Publish date is not entered.');\n        }\n\n    } else if (!date.match(/^\\d{4}\\-\\d{2}\\-\\d{2}$/)) {\n\n        validate.error('post-date', 'Date must be in the YYYY-MM-DD format.');\n    }\n\n    var update = post.update();\n\n    if (update === '') {\n\n        validate.error('post-update', 'Update date is not entered.');\n\n    } else if (!update.match(/^\\d{4}\\-\\d{2}\\-\\d{2}$/)) {\n\n        validate.error('post-update', 'Update date must be in the YYYY-MM-DD format.');\n    }\n}\n\n// Handles save and\n// save-with-continue actions.\n\nfunction submitPost(post, edit) {\n\n    var form = document.getElementById('post-form');\n\n    validate.clear(form);\n\n    validatePost(post);\n\n    if (validate.hasError(form)) {\n\n        return false;\n    }\n\n    // When post has '$id' property\n    // then it's an existing post.\n\n    if (post.$id) {\n\n        updatePost(form, post, edit);\n\n    } else {\n\n        savePost(form, post, edit);\n    }\n}\n\n// Updates the already existing\n// post. Assumes that the post\n// is validated.\n\nfunction updatePost(form, post, edit) {\n\n    api.updatePost(post.$id, post.toJS()).then(function(response) {\n\n        if (response.status === 'success') {\n\n            message.info('Post updated.');\n\n            if (!edit) {\n\n                route.go(post.type() + 's');\n            }\n\n        } else {\n\n            validate.formError(form, response.message);\n\n            window.scroll(0, 0);\n        }\n\n    }, message.error).done();\n}\n\n// Saves the new post.\n\nfunction savePost(form, post, edit) {\n\n    api.savePost(post.toJS()).then(function(response) {\n\n        if (response.status === 'success') {\n\n            message.info('Post saved.');\n\n            // Redirect to post page when we\n            // want to keep editing the post.\n            // Otherwise go back to listing page.\n\n            if (edit) {\n\n                route.go(post.type() + '/' + response.data);\n\n            } else {\n\n                route.go(post.type() + 's');\n            }\n\n        } else {\n\n            validate.formError(form, response.message);\n\n            window.scroll(0, 0);\n        }\n\n    }, message.error).done();\n}\n","var message = require('../message');\nvar api = require('../api');\nvar validate = require('../validate');\n\nexports.create = function(data) {\n\n    var mytype = sessionStorage.getItem('user-type');\n\n    var user = {\n\n        username: ko.observable('').trimmed(),\n        fullname: ko.observable('').trimmed(),\n        type: ko.observable('author'),\n        link: ko.observable('').trimmed(),\n        password: ko.observable('').trimmed(),\n        password_edit: ko.observable(true),\n        password_text: ko.observable(false),\n        error: ko.observable(''),\n        creating: true,\n        files: ko.observable(false),\n        mytype: mytype,\n\n        save: function(form) {\n\n            validate.clear(form);\n\n            if (user.password_edit()) {\n\n                var password = user.password();\n\n                if (password === '') {\n\n                    validate.error('user-password', 'Password is not set.');\n\n                } else if (password.length < 6) {\n\n                    validate.error('user-password', 'Password length must be at least 6.');\n                }\n            }\n\n            var username = user.username();\n\n            if (username === '') {\n\n                validate.error('user-username', 'Username is not set.');\n\n            } else {\n\n                if (!username.match(/^[a-zA-Z0-9]+$/)) {\n\n                    validate.error('user-username', 'Use letters and numbers only.');\n                }\n            }\n\n            var fullname = user.fullname();\n\n            if (fullname === '') {\n\n                validate.error('user-fullname', 'Full name is not set.');\n            }\n\n            var link = user.link();\n\n            if (link !== '') {\n\n                if (!link.match(/https?:\\/\\//)) {\n\n                    validate.error('user-link', 'Link must start with http:// or https:// prefix.');\n                }\n            }\n\n            if (validate.hasError(form)) {\n\n                return false;\n            }\n\n            if (user.$id) {\n\n                api.updateUser(user.$id, user.toJS()).then(function(response) {\n\n                    if (response.status === 'success') {\n\n                        route.go('users');\n\n                    } else {\n\n                        validate.formError(form, response.message);\n                    }\n\n                }, message.error);\n\n            } else {\n\n                api.saveUser(user.toJS()).then(function(response) {\n\n                    if (response.status === 'success') {\n\n                        route.go('users');\n\n                    } else {\n\n                        validate.formError(form, response.message);\n                    }\n\n                }, message.error);\n            }\n\n            return false;\n        },\n\n        toJS: function() {\n\n            var js = {\n\n                username: user.username(),\n                fullname: user.fullname(),\n                type: user.type(),\n                link: user.link(),\n                files: user.files()\n            };\n\n            if (user.password_edit()) {\n\n                js.password = user.password();\n            }\n\n            return js;\n        }\n    };\n\n    user.password_text.subscribe(function(value) {\n\n        if (value) {\n\n            document.getElementById('user-password').type = 'text';\n\n        } else {\n\n            document.getElementById('user-password').type = 'password';\n        }\n    });\n\n    if (data) {\n\n        user.$id = data.$id;\n        user.creating = false;\n        user.username(data.username);\n        user.fullname(data.fullname);\n        user.type(data.type);\n        user.link(data.link);\n        user.password_edit(false);\n        user.files(data.files);\n    }\n\n    return user;\n};\n","exports.show = function() {\n\n    document.getElementById('spinner').style.display = 'block';\n};\n\nexports.hide = function() {\n\n    document.getElementById('spinner').style.display = 'none';\n};\n","// http://stackoverflow.com/questions/3217492/list-of-language-codes-in-yaml-or-json\n// @author Phil Teare\n// using wikipedia data\n\nmodule.exports = [\n    {\n        'code': 'ab',\n        'name': 'Abkhaz'\n    },\n    {\n        'code': 'aa',\n        'name': 'Afar'\n    },\n    {\n        'code': 'af',\n        'name': 'Afrikaans'\n    },\n    {\n        'code': 'ak',\n        'name': 'Akan'\n    },\n    {\n        'code': 'sq',\n        'name': 'Albanian'\n    },\n    {\n        'code': 'am',\n        'name': 'Amharic'\n    },\n    {\n        'code': 'ar',\n        'name': 'Arabic'\n    },\n    {\n        'code': 'an',\n        'name': 'Aragonese'\n    },\n    {\n        'code': 'hy',\n        'name': 'Armenian'\n    },\n    {\n        'code': 'as',\n        'name': 'Assamese'\n    },\n    {\n        'code': 'av',\n        'name': 'Avaric'\n    },\n    {\n        'code': 'ae',\n        'name': 'Avestan'\n    },\n    {\n        'code': 'ay',\n        'name': 'Aymara'\n    },\n    {\n        'code': 'az',\n        'name': 'Azerbaijani'\n    },\n    {\n        'code': 'bm',\n        'name': 'Bambara'\n    },\n    {\n        'code': 'ba',\n        'name': 'Bashkir'\n    },\n    {\n        'code': 'eu',\n        'name': 'Basque'\n    },\n    {\n        'code': 'be',\n        'name': 'Belarusian'\n    },\n    {\n        'code': 'bn',\n        'name': 'Bengali'\n    },\n    {\n        'code': 'bh',\n        'name': 'Bihari'\n    },\n    {\n        'code': 'bi',\n        'name': 'Bislama'\n    },\n    {\n        'code': 'bs',\n        'name': 'Bosnian'\n    },\n    {\n        'code': 'br',\n        'name': 'Breton'\n    },\n    {\n        'code': 'bg',\n        'name': 'Bulgarian'\n    },\n    {\n        'code': 'my',\n        'name': 'Burmese'\n    },\n    {\n        'code': 'ca',\n        'name': 'Catalan; Valencian'\n    },\n    {\n        'code': 'ch',\n        'name': 'Chamorro'\n    },\n    {\n        'code': 'ce',\n        'name': 'Chechen'\n    },\n    {\n        'code': 'ny',\n        'name': 'Chichewa; Chewa; Nyanja'\n    },\n    {\n        'code': 'zh',\n        'name': 'Chinese'\n    },\n    {\n        'code': 'cv',\n        'name': 'Chuvash'\n    },\n    {\n        'code': 'kw',\n        'name': 'Cornish'\n    },\n    {\n        'code': 'co',\n        'name': 'Corsican'\n    },\n    {\n        'code': 'cr',\n        'name': 'Cree'\n    },\n    {\n        'code': 'hr',\n        'name': 'Croatian'\n    },\n    {\n        'code': 'cs',\n        'name': 'Czech'\n    },\n    {\n        'code': 'da',\n        'name': 'Danish'\n    },\n    {\n        'code': 'dv',\n        'name': 'Divehi; Dhivehi; Maldivian;'\n    },\n    {\n        'code': 'nl',\n        'name': 'Dutch'\n    },\n    {\n        'code': 'en',\n        'name': 'English'\n    },\n    {\n        'code': 'eo',\n        'name': 'Esperanto'\n    },\n    {\n        'code': 'et',\n        'name': 'Estonian'\n    },\n    {\n        'code': 'ee',\n        'name': 'Ewe'\n    },\n    {\n        'code': 'fo',\n        'name': 'Faroese'\n    },\n    {\n        'code': 'fj',\n        'name': 'Fijian'\n    },\n    {\n        'code': 'fi',\n        'name': 'Finnish'\n    },\n    {\n        'code': 'fr',\n        'name': 'French'\n    },\n    {\n        'code': 'ff',\n        'name': 'Fula; Fulah; Pulaar; Pular'\n    },\n    {\n        'code': 'gl',\n        'name': 'Galician'\n    },\n    {\n        'code': 'ka',\n        'name': 'Georgian'\n    },\n    {\n        'code': 'de',\n        'name': 'German'\n    },\n    {\n        'code': 'el',\n        'name': 'Greek, Modern'\n    },\n    {\n        'code': 'gn',\n        'name': 'Guaran'\n    },\n    {\n        'code': 'gu',\n        'name': 'Gujarati'\n    },\n    {\n        'code': 'ht',\n        'name': 'Haitian; Haitian Creole'\n    },\n    {\n        'code': 'ha',\n        'name': 'Hausa'\n    },\n    {\n        'code': 'he',\n        'name': 'Hebrew (modern)'\n    },\n    {\n        'code': 'hz',\n        'name': 'Herero'\n    },\n    {\n        'code': 'hi',\n        'name': 'Hindi'\n    },\n    {\n        'code': 'ho',\n        'name': 'Hiri Motu'\n    },\n    {\n        'code': 'hu',\n        'name': 'Hungarian'\n    },\n    {\n        'code': 'is',\n        'name': 'Icelandic'\n    },\n    {\n        'code': 'io',\n        'name': 'Ido'\n    },\n    {\n        'code': 'ig',\n        'name': 'Igbo'\n    },\n    {\n        'code': 'id',\n        'name': 'Indonesian'\n    },\n    {\n        'code': 'ia',\n        'name': 'Interlingua'\n    },\n    {\n        'code': 'ie',\n        'name': 'Interlingue'\n    },\n    {\n        'code': 'iu',\n        'name': 'Inuktitut'\n    },\n    {\n        'code': 'ik',\n        'name': 'Inupiaq'\n    },\n    {\n        'code': 'ga',\n        'name': 'Irish'\n    },\n    {\n        'code': 'it',\n        'name': 'Italian'\n    },\n    {\n        'code': 'ja',\n        'name': 'Japanese'\n    },\n    {\n        'code': 'jv',\n        'name': 'Javanese'\n    },\n    {\n        'code': 'kl',\n        'name': 'Kalaallisut, Greenlandic'\n    },\n    {\n        'code': 'kn',\n        'name': 'Kannada'\n    },\n    {\n        'code': 'kr',\n        'name': 'Kanuri'\n    },\n    {\n        'code': 'ks',\n        'name': 'Kashmiri'\n    },\n    {\n        'code': 'kk',\n        'name': 'Kazakh'\n    },\n    {\n        'code': 'km',\n        'name': 'Khmer'\n    },\n    {\n        'code': 'ki',\n        'name': 'Kikuyu, Gikuyu'\n    },\n    {\n        'code': 'rw',\n        'name': 'Kinyarwanda'\n    },\n    {\n        'code': 'ky',\n        'name': 'Kirghiz, Kyrgyz'\n    },\n    {\n        'code': 'rn',\n        'name': 'Kirundi'\n    },\n    {\n        'code': 'kv',\n        'name': 'Komi'\n    },\n    {\n        'code': 'kg',\n        'name': 'Kongo'\n    },\n    {\n        'code': 'ko',\n        'name': 'Korean'\n    },\n    {\n        'code': 'ku',\n        'name': 'Kurdish'\n    },\n    {\n        'code': 'kj',\n        'name': 'Kwanyama, Kuanyama'\n    },\n    {\n        'code': 'lo',\n        'name': 'Lao'\n    },\n    {\n        'code': 'la',\n        'name': 'Latin'\n    },\n    {\n        'code': 'lv',\n        'name': 'Latvian'\n    },\n    {\n        'code': 'li',\n        'name': 'Limburgish, Limburgan, Limburger'\n    },\n    {\n        'code': 'ln',\n        'name': 'Lingala'\n    },\n    {\n        'code': 'lt',\n        'name': 'Lithuanian'\n    },\n    {\n        'code': 'lu',\n        'name': 'Luba-Katanga'\n    },\n    {\n        'code': 'lg',\n        'name': 'Luganda'\n    },\n    {\n        'code': 'lb',\n        'name': 'Luxembourgish, Letzeburgesch'\n    },\n    {\n        'code': 'mk',\n        'name': 'Macedonian'\n    },\n    {\n        'code': 'mg',\n        'name': 'Malagasy'\n    },\n    {\n        'code': 'ms',\n        'name': 'Malay'\n    },\n    {\n        'code': 'ml',\n        'name': 'Malayalam'\n    },\n    {\n        'code': 'mt',\n        'name': 'Maltese'\n    },\n    {\n        'code': 'gv',\n        'name': 'Manx'\n    },\n    {\n        'code': 'mr',\n        'name': 'Marathi (Marh)'\n    },\n    {\n        'code': 'mh',\n        'name': 'Marshallese'\n    },\n    {\n        'code': 'mn',\n        'name': 'Mongolian'\n    },\n    {\n        'code': 'mi',\n        'name': 'Mori'\n    },\n    {\n        'code': 'na',\n        'name': 'Nauru'\n    },\n    {\n        'code': 'nv',\n        'name': 'Navajo, Navaho'\n    },\n    {\n        'code': 'ng',\n        'name': 'Ndonga'\n    },\n    {\n        'code': 'ne',\n        'name': 'Nepali'\n    },\n    {\n        'code': 'nd',\n        'name': 'North Ndebele'\n    },\n    {\n        'code': 'se',\n        'name': 'Northern Sami'\n    },\n    {\n        'code': 'no',\n        'name': 'Norwegian'\n    },\n    {\n        'code': 'nb',\n        'name': 'Norwegian Bokml'\n    },\n    {\n        'code': 'nn',\n        'name': 'Norwegian Nynorsk'\n    },\n    {\n        'code': 'ii',\n        'name': 'Nuosu'\n    },\n    {\n        'code': 'oc',\n        'name': 'Occitan'\n    },\n    {\n        'code': 'oj',\n        'name': 'Ojibwe, Ojibwa'\n    },\n    {\n        'code': 'cu',\n        'name': 'Old Church Slavonic, Church Slavic, Church Slavonic, Old Bulgarian, Old Slavonic'\n    },\n    {\n        'code': 'or',\n        'name': 'Oriya'\n    },\n    {\n        'code': 'om',\n        'name': 'Oromo'\n    },\n    {\n        'code': 'os',\n        'name': 'Ossetian, Ossetic'\n    },\n    {\n        'code': 'pa',\n        'name': 'Panjabi, Punjabi'\n    },\n    {\n        'code': 'ps',\n        'name': 'Pashto, Pushto'\n    },\n    {\n        'code': 'fa',\n        'name': 'Persian'\n    },\n    {\n        'code': 'pl',\n        'name': 'Polish'\n    },\n    {\n        'code': 'pt',\n        'name': 'Portuguese'\n    },\n    {\n        'code': 'pi',\n        'name': 'Pli'\n    },\n    {\n        'code': 'qu',\n        'name': 'Quechua'\n    },\n    {\n        'code': 'ro',\n        'name': 'Romanian, Moldavian, Moldovan'\n    },\n    {\n        'code': 'rm',\n        'name': 'Romansh'\n    },\n    {\n        'code': 'ru',\n        'name': 'Russian'\n    },\n    {\n        'code': 'sm',\n        'name': 'Samoan'\n    },\n    {\n        'code': 'sg',\n        'name': 'Sango'\n    },\n    {\n        'code': 'sa',\n        'name': 'Sanskrit (Saskta)'\n    },\n    {\n        'code': 'sc',\n        'name': 'Sardinian'\n    },\n    {\n        'code': 'gd',\n        'name': 'Scottish Gaelic; Gaelic'\n    },\n    {\n        'code': 'sr',\n        'name': 'Serbian'\n    },\n    {\n        'code': 'sn',\n        'name': 'Shona'\n    },\n    {\n        'code': 'sd',\n        'name': 'Sindhi'\n    },\n    {\n        'code': 'si',\n        'name': 'Sinhala, Sinhalese'\n    },\n    {\n        'code': 'sk',\n        'name': 'Slovak'\n    },\n    {\n        'code': 'sl',\n        'name': 'Slovene'\n    },\n    {\n        'code': 'so',\n        'name': 'Somali'\n    },\n    {\n        'code': 'nr',\n        'name': 'South Ndebele'\n    },\n    {\n        'code': 'st',\n        'name': 'Southern Sotho'\n    },\n    {\n        'code': 'es',\n        'name': 'Spanish; Castilian'\n    },\n    {\n        'code': 'su',\n        'name': 'Sundanese'\n    },\n    {\n        'code': 'sw',\n        'name': 'Swahili'\n    },\n    {\n        'code': 'ss',\n        'name': 'Swati'\n    },\n    {\n        'code': 'sv',\n        'name': 'Swedish'\n    },\n    {\n        'code': 'tl',\n        'name': 'Tagalog'\n    },\n    {\n        'code': 'ty',\n        'name': 'Tahitian'\n    },\n    {\n        'code': 'tg',\n        'name': 'Tajik'\n    },\n    {\n        'code': 'ta',\n        'name': 'Tamil'\n    },\n    {\n        'code': 'tt',\n        'name': 'Tatar'\n    },\n    {\n        'code': 'te',\n        'name': 'Telugu'\n    },\n    {\n        'code': 'th',\n        'name': 'Thai'\n    },\n    {\n        'code': 'bo',\n        'name': 'Tibetan Standard, Tibetan, Central'\n    },\n    {\n        'code': 'ti',\n        'name': 'Tigrinya'\n    },\n    {\n        'code': 'to',\n        'name': 'Tonga (Tonga Islands)'\n    },\n    {\n        'code': 'ts',\n        'name': 'Tsonga'\n    },\n    {\n        'code': 'tn',\n        'name': 'Tswana'\n    },\n    {\n        'code': 'tr',\n        'name': 'Turkish'\n    },\n    {\n        'code': 'tk',\n        'name': 'Turkmen'\n    },\n    {\n        'code': 'tw',\n        'name': 'Twi'\n    },\n    {\n        'code': 'ug',\n        'name': 'Uighur, Uyghur'\n    },\n    {\n        'code': 'uk',\n        'name': 'Ukrainian'\n    },\n    {\n        'code': 'ur',\n        'name': 'Urdu'\n    },\n    {\n        'code': 'uz',\n        'name': 'Uzbek'\n    },\n    {\n        'code': 've',\n        'name': 'Venda'\n    },\n    {\n        'code': 'vi',\n        'name': 'Vietnamese'\n    },\n    {\n        'code': 'vo',\n        'name': 'Volapk'\n    },\n    {\n        'code': 'wa',\n        'name': 'Walloon'\n    },\n    {\n        'code': 'cy',\n        'name': 'Welsh'\n    },\n    {\n        'code': 'fy',\n        'name': 'Western Frisian'\n    },\n    {\n        'code': 'wo',\n        'name': 'Wolof'\n    },\n    {\n        'code': 'xh',\n        'name': 'Xhosa'\n    },\n    {\n        'code': 'yi',\n        'name': 'Yiddish'\n    },\n    {\n        'code': 'yo',\n        'name': 'Yoruba'\n    },\n    {\n        'code': 'za',\n        'name': 'Zhuang, Chuang'\n    }\n];\n"]}